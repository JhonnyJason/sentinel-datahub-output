(()=>{"use strict";var e={n:r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return e.d(n,{a:n}),n},d:(r,n)=>{for(var o in n)e.o(n,o)&&!e.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{configprop:()=>M,tradovateCid:()=>z,tradovateSecret:()=>k});var n={};e.r(n);var o={};e.r(o),e.d(o,{prepareAndExpose:()=>$});var t={};e.r(t),e.d(t,{initialize:()=>J,simpleTest:()=>N});var a={};e.r(a),e.d(a,{serviceStartup:()=>B});const i=require("node:path");var u=e.n(i);const c=require("node:fs");var l,s,d=e.n(c);s=function(e){return JSON.stringify(e,null,4)},l={};var v=function(e){var r,n;return n=function(e){return r("\n"+s(e))},{log:r=function(r){l[e]&&console.log("["+e+"]: "+r)},olog:n}};const f=require("node:net");var g,p,m,y,b,S=e.n(f);({log:g,olog:p}=v("bugsnitch")),m=new Promise(function(e){return e}),b="unnamed",y=async function(e){var r;g("sendToBugsnitch"),await m,(r=S().createConnection("/run/bugsnitch.sk")).on("connect",function(){return r.end(e)}),r.on("error",function(e){return console.error(e)}),r.on("close",function(){return g("Connection closed!")})};var h,O,C,j,w=function(e){var r,n;if(g("report"),console.error(e),"string"!=typeof e)try{return n=`[${b}] Error: `+e.message,e.cause&&(n+="\n Cause: "+e.cause),e.stack&&(n+="\n Stack: "+e.stack),void y(n)}catch(e){r=e,console.error("bugsnitch.report: unexpected errorObject!\n "+r.message)}else y(n=`[${b}]: ${e}`)};O=Object.create(null);try{h=u().resolve(process.cwd(),"./.config.json"),C=d().readFileSync(h,"utf8"),O=JSON.parse(C)}catch(e){j="@configmodule - config parsing:\n",j+=" Local Config File could not be read or parsed!\n ",j+=e.message,w(j)}var P,T,k=O.secret||"none",z=O.cid||"none",M=!0;(function(e){var r;for(r in e)e[r]&&(l[r]=!0)})({bugsnitch:!0,scimodule:!0,startupmodule:!0,tradovatemodule:!0}),({log:P,olog:T}=v("scimodule"));var _,q,x,E,$=function(){P("prepareAndExpose")};({log:x,olog:E}=v("tradovatemodule")),_=null,q=null;var A,F,J=function(e){x("initialize"),null!=e.tradovateSecret&&(q=e.tradovateSecret),null!=e.tradovateCid&&(_=e.tradovateCid)},N=function(){x("simpleTest"),E({apiCid:_,apiSecret:q})};({log:A,olog:F}=v("startupmodule"));var B=async function(){A("serviceStartup"),await N()};const L={configmodule:r,debugmodule:n,scimodule:o,startupmodule:a,tradovatemodule:t};global.allModules=L,async function(){var e,n,o;try{return o=function(){var o;for(n in o=[],L)null!=(e=L[n]).initialize&&o.push(e.initialize(r));return o}(),await Promise.all(o),await L.startupmodule.serviceStartup()}catch(e){return w("@run: "+e.message)}}()})();